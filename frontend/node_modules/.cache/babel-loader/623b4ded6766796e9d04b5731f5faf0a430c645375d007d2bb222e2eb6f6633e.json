{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ksoyu\\\\Downloads\\\\nlp\\\\frontend\\\\src\\\\pages\\\\CitationPage.jsx\",\n  _s = $RefreshSig$();\nimport 'aframe';\nimport React, { useEffect, useRef, useState } from 'react';\nimport * as d3 from 'd3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CitationPage() {\n  _s();\n  const svgRef = useRef();\n  const [data, setData] = useState(null);\n  useEffect(() => {\n    fetch('/citation_graph_with_cluster.json').then(res => res.json()).then(json => {\n      // 변환: weight → value 로 rename\n      const nodes = json.nodes.map(d => ({\n        ...d\n      }));\n      const links = json.links.map(d => ({\n        ...d,\n        value: d.weight\n      }));\n      setData({\n        nodes,\n        links\n      });\n    });\n  }, []);\n  useEffect(() => {\n    if (!data) return;\n    const svg = d3.select(svgRef.current);\n    svg.selectAll('*').remove(); // 초기화\n\n    const width = 1000;\n    const height = 700;\n    svg.attr('viewBox', [0, 0, width, height]);\n    const color = d3.scaleOrdinal(d3.schemeCategory10);\n    const simulation = d3.forceSimulation(data.nodes).force('link', d3.forceLink(data.links).id(d => d.id).distance(50)).force('charge', d3.forceManyBody().strength(-100)).force('center', d3.forceCenter(width / 2, height / 2));\n    const link = svg.append('g').attr('stroke', '#aaa').attr('stroke-opacity', 0.6).selectAll('line').data(data.links).join('line').attr('stroke-width', d => Math.sqrt(d.value));\n    const node = svg.append('g').attr('stroke', '#fff').attr('stroke-width', 1.5).selectAll('circle').data(data.nodes).join('circle').attr('r', 5).attr('fill', d => color(d.group)).call(drag(simulation));\n    node.append(\"title\").text(d => d.name);\n    simulation.on('tick', () => {\n      link.attr('x1', d => d.source.x).attr('y1', d => d.source.y).attr('x2', d => d.target.x).attr('y2', d => d.target.y);\n      node.attr('cx', d => d.x).attr('cy', d => d.y);\n    });\n    function drag(simulation) {\n      function dragstarted(event, d) {\n        if (!event.active) simulation.alphaTarget(0.3).restart();\n        d.fx = d.x;\n        d.fy = d.y;\n      }\n      function dragged(event, d) {\n        d.fx = event.x;\n        d.fy = event.y;\n      }\n      function dragended(event, d) {\n        if (!event.active) simulation.alphaTarget(0);\n        d.fx = null;\n        d.fy = null;\n      }\n      return d3.drag().on(\"start\", dragstarted).on(\"drag\", dragged).on(\"end\", dragended);\n    }\n  }, [data]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: svgRef,\n      width: \"1000\",\n      height: \"700\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 5\n  }, this);\n}\n_s(CitationPage, \"7bcEtfA/bPutJoWd8HybTQtpunw=\");\n_c = CitationPage;\nexport default CitationPage;\nvar _c;\n$RefreshReg$(_c, \"CitationPage\");","map":{"version":3,"names":["React","useEffect","useRef","useState","d3","jsxDEV","_jsxDEV","CitationPage","_s","svgRef","data","setData","fetch","then","res","json","nodes","map","d","links","value","weight","svg","select","current","selectAll","remove","width","height","attr","color","scaleOrdinal","schemeCategory10","simulation","forceSimulation","force","forceLink","id","distance","forceManyBody","strength","forceCenter","link","append","join","Math","sqrt","node","group","call","drag","text","name","on","source","x","y","target","dragstarted","event","active","alphaTarget","restart","fx","fy","dragged","dragended","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/ksoyu/Downloads/nlp/frontend/src/pages/CitationPage.jsx"],"sourcesContent":["import 'aframe';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport * as d3 from 'd3';\r\n\r\nfunction CitationPage() {\r\n  const svgRef = useRef();\r\n  const [data, setData] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetch('/citation_graph_with_cluster.json')\r\n      .then(res => res.json())\r\n      .then(json => {\r\n        // 변환: weight → value 로 rename\r\n        const nodes = json.nodes.map(d => ({ ...d }));\r\n        const links = json.links.map(d => ({ ...d, value: d.weight }));\r\n        setData({ nodes, links });\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!data) return;\r\n\r\n    const svg = d3.select(svgRef.current);\r\n    svg.selectAll('*').remove(); // 초기화\r\n\r\n    const width = 1000;\r\n    const height = 700;\r\n\r\n    svg.attr('viewBox', [0, 0, width, height]);\r\n\r\n    const color = d3.scaleOrdinal(d3.schemeCategory10);\r\n\r\n    const simulation = d3.forceSimulation(data.nodes)\r\n      .force('link', d3.forceLink(data.links).id(d => d.id).distance(50))\r\n      .force('charge', d3.forceManyBody().strength(-100))\r\n      .force('center', d3.forceCenter(width / 2, height / 2));\r\n\r\n    const link = svg.append('g')\r\n      .attr('stroke', '#aaa')\r\n      .attr('stroke-opacity', 0.6)\r\n      .selectAll('line')\r\n      .data(data.links)\r\n      .join('line')\r\n      .attr('stroke-width', d => Math.sqrt(d.value));\r\n\r\n    const node = svg.append('g')\r\n      .attr('stroke', '#fff')\r\n      .attr('stroke-width', 1.5)\r\n      .selectAll('circle')\r\n      .data(data.nodes)\r\n      .join('circle')\r\n      .attr('r', 5)\r\n      .attr('fill', d => color(d.group))\r\n      .call(drag(simulation));\r\n\r\n    node.append(\"title\")\r\n      .text(d => d.name);\r\n\r\n    simulation.on('tick', () => {\r\n      link\r\n        .attr('x1', d => d.source.x)\r\n        .attr('y1', d => d.source.y)\r\n        .attr('x2', d => d.target.x)\r\n        .attr('y2', d => d.target.y);\r\n\r\n      node\r\n        .attr('cx', d => d.x)\r\n        .attr('cy', d => d.y);\r\n    });\r\n\r\n    function drag(simulation) {\r\n      function dragstarted(event, d) {\r\n        if (!event.active) simulation.alphaTarget(0.3).restart();\r\n        d.fx = d.x;\r\n        d.fy = d.y;\r\n      }\r\n\r\n      function dragged(event, d) {\r\n        d.fx = event.x;\r\n        d.fy = event.y;\r\n      }\r\n\r\n      function dragended(event, d) {\r\n        if (!event.active) simulation.alphaTarget(0);\r\n        d.fx = null;\r\n        d.fy = null;\r\n      }\r\n\r\n      return d3.drag()\r\n        .on(\"start\", dragstarted)\r\n        .on(\"drag\", dragged)\r\n        .on(\"end\", dragended);\r\n    }\r\n  }, [data]);\r\n\r\n  return (\r\n    <div>\r\n      <svg ref={svgRef} width=\"1000\" height=\"700\" />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CitationPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}