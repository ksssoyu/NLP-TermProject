{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ksoyu\\\\Downloads\\\\nlp\\\\frontend\\\\src\\\\pages\\\\CitationPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport * as d3 from 'd3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CitationPage() {\n  _s();\n  const svgRef = useRef();\n  const [data, setData] = useState(null);\n  useEffect(() => {\n    fetch('/citation_graph_with_cluster.json').then(res => res.json()).then(json => {\n      const nodes = json.nodes;\n      const nodeById = new Map(nodes.map(d => [d.id, d]));\n      const links = json.links.map(d => ({\n        source: nodeById.get(d.source),\n        target: nodeById.get(d.target),\n        value: d.weight\n      }));\n      setData({\n        nodes,\n        links\n      });\n    });\n  }, []);\n  useEffect(() => {\n    if (!data) return;\n    const svg = d3.select(svgRef.current);\n    svg.selectAll('*').remove(); // 초기화\n\n    const width = 1000;\n    const height = 700;\n    svg.attr('viewBox', [0, 0, width, height]);\n    const color = d3.scaleOrdinal(d3.schemeCategory10);\n    const simulation = d3.forceSimulation(data.nodes).force('link', d3.forceLink(data.links).id(d => d.id).distance(50)).force('charge', d3.forceManyBody().strength(-50)).force('center', d3.forceCenter(width / 2, height / 2)).force('collision', d3.forceCollide(10)); // 조금 겹침 방지\n\n    const link = svg.append('g').attr('stroke', '#aaa').attr('stroke-opacity', 0.6).selectAll('line').data(data.links).join('line').attr('stroke-width', d => Math.sqrt(d.value));\n    const node = svg.append('g').attr('stroke', '#fff').attr('stroke-width', 1.5).selectAll('circle').data(data.nodes).join('circle').attr('r', 5).attr('fill', d => color(d.group)).call(drag(simulation));\n    node.append(\"title\").text(d => d.name);\n    simulation.on('tick', () => {\n      link.attr('x1', d => d.source.x).attr('y1', d => d.source.y).attr('x2', d => d.target.x).attr('y2', d => d.target.y);\n      node.attr('cx', d => d.x).attr('cy', d => d.y);\n    });\n    function drag(simulation) {\n      function dragstarted(event, d) {\n        if (!event.active) simulation.alphaTarget(0.3).restart();\n        d.fx = d.x;\n        d.fy = d.y;\n      }\n      function dragged(event, d) {\n        d.fx = event.x;\n        d.fy = event.y;\n      }\n      function dragended(event, d) {\n        if (!event.active) simulation.alphaTarget(0);\n        d.fx = null;\n        d.fy = null;\n      }\n      return d3.drag().on(\"start\", dragstarted).on(\"drag\", dragged).on(\"end\", dragended);\n    }\n  }, [data]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: svgRef,\n      width: \"1000\",\n      height: \"700\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this);\n}\n_s(CitationPage, \"7bcEtfA/bPutJoWd8HybTQtpunw=\");\n_c = CitationPage;\nexport default CitationPage;\nvar _c;\n$RefreshReg$(_c, \"CitationPage\");","map":{"version":3,"names":["React","useEffect","useRef","useState","d3","jsxDEV","_jsxDEV","CitationPage","_s","svgRef","data","setData","fetch","then","res","json","nodes","nodeById","Map","map","d","id","links","source","get","target","value","weight","svg","select","current","selectAll","remove","width","height","attr","color","scaleOrdinal","schemeCategory10","simulation","forceSimulation","force","forceLink","distance","forceManyBody","strength","forceCenter","forceCollide","link","append","join","Math","sqrt","node","group","call","drag","text","name","on","x","y","dragstarted","event","active","alphaTarget","restart","fx","fy","dragged","dragended","children","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/ksoyu/Downloads/nlp/frontend/src/pages/CitationPage.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport * as d3 from 'd3';\r\n\r\nfunction CitationPage() {\r\n  const svgRef = useRef();\r\n  const [data, setData] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetch('/citation_graph_with_cluster.json')\r\n      .then(res => res.json())\r\n      .then(json => {\r\n        const nodes = json.nodes;\r\n        const nodeById = new Map(nodes.map(d => [d.id, d]));\r\n\r\n        const links = json.links.map(d => ({\r\n          source: nodeById.get(d.source),\r\n          target: nodeById.get(d.target),\r\n          value: d.weight\r\n        }));\r\n\r\n        setData({ nodes, links });\r\n      });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!data) return;\r\n\r\n    const svg = d3.select(svgRef.current);\r\n    svg.selectAll('*').remove(); // 초기화\r\n\r\n    const width = 1000;\r\n    const height = 700;\r\n\r\n    svg.attr('viewBox', [0, 0, width, height]);\r\n\r\n    const color = d3.scaleOrdinal(d3.schemeCategory10);\r\n\r\n    const simulation = d3.forceSimulation(data.nodes)\r\n      .force('link', d3.forceLink(data.links).id(d => d.id).distance(50))\r\n      .force('charge', d3.forceManyBody().strength(-50))\r\n      .force('center', d3.forceCenter(width / 2, height / 2))\r\n      .force('collision', d3.forceCollide(10));  // 조금 겹침 방지\r\n\r\n    const link = svg.append('g')\r\n      .attr('stroke', '#aaa')\r\n      .attr('stroke-opacity', 0.6)\r\n      .selectAll('line')\r\n      .data(data.links)\r\n      .join('line')\r\n      .attr('stroke-width', d => Math.sqrt(d.value));\r\n\r\n    const node = svg.append('g')\r\n      .attr('stroke', '#fff')\r\n      .attr('stroke-width', 1.5)\r\n      .selectAll('circle')\r\n      .data(data.nodes)\r\n      .join('circle')\r\n      .attr('r', 5)\r\n      .attr('fill', d => color(d.group))\r\n      .call(drag(simulation));\r\n\r\n    node.append(\"title\").text(d => d.name);\r\n\r\n    simulation.on('tick', () => {\r\n      link\r\n        .attr('x1', d => d.source.x)\r\n        .attr('y1', d => d.source.y)\r\n        .attr('x2', d => d.target.x)\r\n        .attr('y2', d => d.target.y);\r\n\r\n      node\r\n        .attr('cx', d => d.x)\r\n        .attr('cy', d => d.y);\r\n    });\r\n\r\n    function drag(simulation) {\r\n      function dragstarted(event, d) {\r\n        if (!event.active) simulation.alphaTarget(0.3).restart();\r\n        d.fx = d.x;\r\n        d.fy = d.y;\r\n      }\r\n\r\n      function dragged(event, d) {\r\n        d.fx = event.x;\r\n        d.fy = event.y;\r\n      }\r\n\r\n      function dragended(event, d) {\r\n        if (!event.active) simulation.alphaTarget(0);\r\n        d.fx = null;\r\n        d.fy = null;\r\n      }\r\n\r\n      return d3.drag()\r\n        .on(\"start\", dragstarted)\r\n        .on(\"drag\", dragged)\r\n        .on(\"end\", dragended);\r\n    }\r\n  }, [data]);\r\n\r\n  return (\r\n    <div>\r\n      <svg ref={svgRef} width=\"1000\" height=\"700\" />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CitationPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}